/**
* File awcs-basic-cart-functions.min.js
* Basic cart actions
* Update / change cart items - remove item, undo item, apply coupon, remove coupon, update cart
*/
(function(a){"undefined"===typeof wc_cart_params&&(a(document).on("click",".woocommerce-cart-form .product-remove > a",function(b){b.preventDefault();awcs_adjust_target_element(a(this));var d=a(b.currentTarget).parents("form");block(d);block(a("div.cart_totals"));b=a(this).attr("href").split("&_wpnonce=");var c=b[0].split("remove_item=");a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_update_cart",wpnonce:b[1],remove_item:c[1],isSinglePage:a(this).parents("#awcs-single-page-cart").length?
"single-page":""},success:function(e){awcs_target.html(e);jQuery(document.body).trigger("wc_fragment_refresh")},complete:function(){unblock(d);unblock(a("div.cart_totals"));a.scroll_to_notices(a('[role="alert"]'))}})}),a(document).on("click",".woocommerce-message .restore-item",function(b){b.preventDefault();awcs_adjust_target_element(a(this));block(a(this));b=a(this).attr("href").split("&_wpnonce=");var d=b[0].split("undo_item=");a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_update_cart",
wpnonce:b[1],undo_item:d[1],isSinglePage:a(this).parents("#awcs-single-page-cart").length?"single-page":""},success:function(c){awcs_target.html(c);jQuery(document.body).trigger("wc_fragment_refresh")},complete:function(){unblock(a(this))}})}),a(document).on("click",'.woocommerce-cart-form :input[name="apply_coupon"]',function(b){b.preventDefault();awcs_adjust_target_element(a(this));var d=a(".woocommerce-cart-form");block(d);var c=a("#coupon_code"),e=c.val();b=a(".woocommerce-cart-form").find("#woocommerce-cart-nonce").val();
var g=a("#awcs_apply_coupon_nonce").val();b={action:"awcs_wc_update_cart",wpnonce:b,awcs_apply_coupon:g,coupon_code:e,isSinglePage:a(this).parents("#awcs-single-page-cart").length?"single-page":""};a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:b,success:function(f){a(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove();awcs_target.html(f);a(document.body).trigger("applied_coupon",[e])},complete:function(){unblock(d);c.val("");a.scroll_to_notices(a('[role="alert"]'))}})}),
a(document).on("keypress",".woocommerce-cart-form #coupon_code",function(b){if(13===b.keyCode){b.preventDefault();awcs_adjust_target_element(a(this));var d=a(".woocommerce-cart-form");block(d);var c=a("#coupon_code"),e=c.val();b=a(".woocommerce-cart-form").find("#woocommerce-cart-nonce").val();var g=a("#awcs_apply_coupon_nonce").val();b={action:"awcs_wc_update_cart",wpnonce:b,awcs_apply_coupon:g,coupon_code:e,isSinglePage:a(this).parents("#awcs-single-page-cart").length?"single-page":""};a.ajax({type:"POST",
url:awcs_wc_global_params.ajax_url,data:b,success:function(f){a(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove();awcs_target.html(f);a(document.body).trigger("applied_coupon",[e])},complete:function(){unblock(d);c.val("");a.scroll_to_notices(a('[role="alert"]'))}})}}),a(document).on("click",".cart-collaterals a.woocommerce-remove-coupon",function(b){b.preventDefault();awcs_adjust_target_element(a(this));var d=a(this).closest(".cart_totals"),c=a(".woocommerce-cart-form");block(c);
block(d);var e=a("#coupon_code"),g=e.val();b=a(".woocommerce-cart-form").find("#woocommerce-cart-nonce").val();var f=a(this).attr("data-coupon"),h=a("#awcs_remove_coupon_nonce").val();b={action:"awcs_wc_update_cart",wpnonce:b,awcs_remove_coupon:f,awcs_remove_coupon_nonce:h,isSinglePage:a(this).parents("#awcs-single-page-cart").length?"single-page":""};a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:b,success:function(k){a(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove();
awcs_target.html(k);jQuery(document.body).trigger("wc_fragment_refresh");a(document.body).trigger("applied_coupon",[g])},complete:function(){unblock(c);unblock(d);e.val("");a.scroll_to_notices(a('[role="alert"]'))}})}),a(document).on("click",'.woocommerce-cart-form :input[name="update_cart"]',function(b){b.preventDefault();var d=a(this);awcs_adjust_target_element(d);var c=a(".woocommerce-cart-form");b=a(".woocommerce-cart-form").find("#woocommerce-cart-nonce").val();var e=c.serialize();e=e+"&action=awcs_wc_update_cart&wpnonce="+
b+"&update_cart=update_cart";block(c);block(a("div.cart_totals"));a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:e,success:function(g){jQuery(document.body).trigger("wc_fragment_refresh");a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_view_updated_cart",isSinglePage:d.parents("#awcs-single-page-cart").length?"single-page":""},success:function(f){awcs_target.html(f)},complete:function(){unblock(c);unblock(a("div.cart_totals"));a.scroll_to_notices(a('[role="alert"]'))}})}})}),
a(document).on("keypress",".woocommerce-cart-form input.qty",function(b){if(13===b.keyCode){b.preventDefault();var d=a(this);awcs_adjust_target_element(d);var c=a(".woocommerce-cart-form");b=a(".woocommerce-cart-form").find("#woocommerce-cart-nonce").val();var e=c.serialize();e=e+"&action=awcs_wc_update_cart&wpnonce="+b+"&update_cart=update_cart";block(c);block(a("div.cart_totals"));a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:e,success:function(g){jQuery(document.body).trigger("wc_fragment_refresh");
a.ajax({type:"POST",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_view_updated_cart",isSinglePage:d.parents("#awcs-single-page-cart").length?"single-page":""},success:function(f){awcs_target.html(f)},complete:function(){unblock(c);unblock(a("div.cart_totals"));a.scroll_to_notices(a('[role="alert"]'))}})}})}}))})(jQuery);