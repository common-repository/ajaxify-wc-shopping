/**
* File awcs-basic-find-products.min.js
* This script is for finding products by Sorting, Paging, using Category / Tag
*/
(function(a){a(document).find("form.woocommerce-ordering").submit(function(d){d.preventDefault()});a(document).on("change","form.woocommerce-ordering select.orderby",function(d){d.preventDefault();var b=a(this).closest("form.woocommerce-ordering").find('input[name="category"]').length?a(this).closest("form.woocommerce-ordering").find('input[name="category"]').val():"",c=a(this).closest("form.woocommerce-ordering").find('input[name="tag"]').length?a(this).closest("form.woocommerce-ordering").find('input[name="tag"]').val():
"";d=a(this).find("option:selected").val();!b&&0<=window.location.href.indexOf("/product-category/")&&(b=window.location.href.split("/product-category/")[1].split("/"),b=b[b.length-1]?b[b.length-1]:b[b.length-2]);!c&&0<=window.location.href.indexOf("/product-tag/")&&(c=window.location.href.split("/product-tag/")[1].split("/"),c=c[c.length-1]?c[c.length-1]:c[c.length-2]);a(this).find("option:selected").attr("selected","selected");a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_sorted_products",
orderby:d,category:b,tag:c},beforeSend:function(){awcs_set_target_element(awcs_get_target_element());block(awcs_target)},success:function(e){var f=a("<div></div>");f.html(e);e=a("ul.products:first",f);awcs_target.find("ul.products").first().replaceWith(e).promise().done(function(){a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").hide();a(document).find("nav.woocommerce-pagination ul.page-numbers li a.next").show();a(document).find('input[name="paged"]').val(1);a(document).find("nav.woocommerce-pagination ul.page-numbers li a.page-numbers").removeAttr("aria-current").removeClass("current");
a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev, nav.woocommerce-pagination ul.page-numbers li a.next").removeAttr("aria-current").removeClass("current");a(document).find("nav.woocommerce-pagination ul.page-numbers li a.page-numbers:not(a.prev, a.next):first").attr("aria-current","page").addClass("current")});a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_get_breadcrumb_with_page",category:b,tag:c},success:function(g){a(document).find("nav.woocommerce-breadcrumb").replaceWith(g)}});
a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_show_result_count",category:b,tag:c},success:function(g){a(document).find("p.woocommerce-result-count").replaceWith(g)}});b?document.title=b+" - "+awcs_wc_global_params.page_title:c?document.title=c+" - "+awcs_wc_global_params.page_title:0<=awcs_wc_global_params.page_title.indexOf("Products")?document.title=awcs_wc_global_params.page_title:document.title="Products - "+awcs_wc_global_params.page_title},complete:function(){a.scroll_to_notices(a(".entry-title, .page-title"));
unblock(awcs_target)}})});a(document).on("click","nav.woocommerce-pagination ul.page-numbers li a.page-numbers, nav.woocommerce-pagination ul.page-numbers li a.prev, nav.woocommerce-pagination ul.page-numbers li a.next",function(d){d.preventDefault();d=a(this).attr("href");var b=d.split("product-page=")[1]?d.split("product-page=")[1]:d.split("admin-ajax.php?paged=")[1];b||(b=(d.split("/page/")[1]?d.split("/page/")[1]:"").split("/")[0]);parseInt(b)==a(document).find("nav.woocommerce-pagination ul.page-numbers li a.page-numbers:not(a.prev, a.next)").length?
a(document).find("nav.woocommerce-pagination ul.page-numbers li a.next").hide():a(document).find("nav.woocommerce-pagination ul.page-numbers li a.next").show();if(1<parseInt(b)){if(!a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").length&&(a(document).find("nav.woocommerce-pagination ul.page-numbers").prepend('<li><a class="prev page-numbers" href="">\u2190</a></li>'),a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").hide(),d=a(document).find('nav.woocommerce-pagination ul.page-numbers li span[aria-current="page"]'))){var c=
d.html();d.closest("li").html('<a class="page-numbers current" href="'+awcs_wc_global_params.home_url+"wp-admin/admin-ajax.php?product-page="+c+'">'+c+"</a>")}a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").show()}1==parseInt(b)&&a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").hide();a(document).find('input[name="paged"]').val(b);a(document).find("nav.woocommerce-pagination ul.page-numbers li a.page-numbers").removeAttr("aria-current").removeClass("current");
a(document).find('nav.woocommerce-pagination ul.page-numbers li a.page-numbers:contains("'+b+'")').attr("aria-current","page");a(document).find('nav.woocommerce-pagination ul.page-numbers li a.page-numbers:contains("'+b+'")').addClass("current");a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev, nav.woocommerce-pagination ul.page-numbers li a.next").removeAttr("aria-current").removeClass("current");d=1<parseInt(b)?parseInt(b)-1:"";if(c=parseInt(b)<a(this).closest("ul.page-numbers").find("li a.page-numbers:not(a.prev, a.next)").length?
parseInt(b)+1:"")c=awcs_wc_global_params.home_url+"wp-admin/admin-ajax.php?product-page="+c,a(document).find("ul.page-numbers li a.next").attr("href",c);d&&(d=awcs_wc_global_params.home_url+"wp-admin/admin-ajax.php?product-page="+d,a(document).find("ul.page-numbers li a.prev").attr("href",d));d=a(document).find("form.woocommerce-ordering select.orderby option:selected").length?a(document).find("form.woocommerce-ordering select.orderby option:selected").val():"";var e=a(document).find('form.woocommerce-ordering input[name="category"]').length?
a(document).find('form.woocommerce-ordering input[name="category"]').val():"",f=a(document).find('form.woocommerce-ordering input[name="tag"]').length?a(document).find('form.woocommerce-ordering input[name="tag"]').val():"";!e&&0<=window.location.href.indexOf("/product-category/")&&(e=window.location.href.split("/product-category/")[1].split("/"),e=e[e.length-1]?e[e.length-1]:e[e.length-2]);!f&&0<=window.location.href.indexOf("/product-tag/")&&(f=window.location.href.split("/product-tag/")[1].split("/"),
f=f[f.length-1]?f[f.length-1]:f[f.length-2]);a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_paged_products",orderby:d,page:b,category:e,tag:f},beforeSend:function(){awcs_set_target_element(awcs_get_target_element());block(awcs_target)},success:function(g){var l=a("<div></div>");l.html(g);g=a("ul.products",l).first();awcs_target.find("ul.products").first().replaceWith(g).promise().done(function(){e=e?e:"";f=f?f:"";a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,
data:{action:"awcs_get_breadcrumb_with_page",page:b,category:e,tag:f},success:function(k){a(document).find("nav.woocommerce-breadcrumb").replaceWith(k)}});a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_show_result_count",page:b,category:e,tag:f},success:function(k){a(document).find("p.woocommerce-result-count").replaceWith(k);e?document.title=e+" - Page - "+b+" - "+awcs_wc_global_params.page_title:f?document.title=f+" - Page - "+b+" - "+awcs_wc_global_params.page_title:
0<=awcs_wc_global_params.page_title.indexOf("Products")?document.title="Page - "+b+" - "+awcs_wc_global_params.page_title:document.title="Products - Page - "+b+" - "+awcs_wc_global_params.page_title}})})},complete:function(){a.scroll_to_notices(a(".entry-title, .page-title"));unblock(awcs_target)}})});var h="div.product_meta .posted_in a, .woocommerce-breadcrumb a, li.product .category a";awcs_wc_global_params.category_selector&&(h=h+", "+awcs_wc_global_params.category_selector);a(document).on("click",
h,function(d){d.preventDefault();if(!a(this).parents(".awcs_basic_single_product_summary").length)if(!a(this).parents(".woocommerce-breadcrumb").length||0<=a(this).attr("href").indexOf("product-category/")){var b=a(this).text(),c=a(this).text();block(a(this));a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_categorized_products",category:b},beforeSend:function(){awcs_adjust_target_element(a(this))},success:function(e){awcs_target.html(e).promise().done(function(){a(document).find("form.woocommerce-ordering").append('<input type="hidden" name="category" value="'+
b+'" />');a(document).find("nav.woocommerce-pagination ul.page-numbers").prepend('<li><a class="prev page-numbers" href="">\u2190</a></li>');a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").hide();var f=a(document).find('nav.woocommerce-pagination ul.page-numbers li span[aria-current="page"]');if(f){var g=f.html();f.closest("li").html('<a class="page-numbers current" href="'+awcs_wc_global_params.home_url+"wp-admin/admin-ajax.php?product-page="+g+'">'+g+"</a>")}})},complete:function(e){document.title=
c+" - "+awcs_wc_global_params.page_title;1<a(document).find(".woocommerce-breadcrumb").length&&a(document).find(".woocommerce-breadcrumb").last().hide();a.scroll_to_notices(a(".entry-title, .page-title"));unblock(a(this))}})}else a(this).attr("href")!=awcs_wc_global_params.shop_url&&window.open(a(this).attr("href"),"_blank")});h="div.product_meta .tagged_as a";awcs_wc_global_params.tag_selector&&(h=h+", "+awcs_wc_global_params.tag_selector);a(document).on("click",h,function(d){d.preventDefault();
if(!a(this).parents(".awcs_basic_single_product_summary").length){var b=a(this).text(),c=a(this).text();block(a(this));a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_tagged_products",tag:b},beforeSend:function(){awcs_adjust_target_element(a(this))},success:function(e){awcs_target.html(e).promise().done(function(){a(document).find("form.woocommerce-ordering").append('<input type="hidden" name="tag" value="'+b+'" />');a(document).find("nav.woocommerce-pagination ul.page-numbers").prepend('<li><a class="prev page-numbers" href="">\u2190</a></li>');
a(document).find("nav.woocommerce-pagination ul.page-numbers li a.prev").hide();var f=a(document).find('nav.woocommerce-pagination ul.page-numbers li span[aria-current="page"]');if(f){var g=f.html();f.closest("li").html('<a class="page-numbers current" href="'+awcs_wc_global_params.home_url+"wp-admin/admin-ajax.php?product-page="+g+'">'+g+"</a>")}})},complete:function(e){document.title=c+" - "+awcs_wc_global_params.page_title;1<a(document).find(".woocommerce-breadcrumb").length&&a(document).find(".woocommerce-breadcrumb").last().hide();
a.scroll_to_notices(a(".entry-title, .page-title"));unblock(a(this))}})}});a(document).on("click",".oceanwp-toolbar .result-count li",function(d){d.preventDefault();d=a(document).find("form.woocommerce-ordering select.orderby option:selected").length?a(document).find("form.woocommerce-ordering select.orderby option:selected").val():"";var b=a(document).find('form.woocommerce-ordering input[name="category"]').length?a(document).find('form.woocommerce-ordering input[name="category"]').val():"",c=a(document).find('form.woocommerce-ordering input[name="tag"]').length?
a(document).find('form.woocommerce-ordering input[name="tag"]').val():"";!b&&0<=window.location.href.indexOf("/product-category/")&&(b=window.location.href.split("/product-category/")[1].split("/"),b=b[b.length-1]?b[b.length-1]:b[b.length-2]);!c&&0<=window.location.href.indexOf("/product-tag/")&&(c=window.location.href.split("/product-tag/")[1].split("/"),c=c[c.length-1]?c[c.length-1]:c[c.length-2]);d={action:"awcs_wc_view_numberof_products",limit:a(this).text(),orderby:d,category:b,tag:c};a.ajax({type:"post",
url:awcs_wc_global_params.ajax_url,data:d,beforeSend:function(){awcs_set_target_element(awcs_get_target_element());block(awcs_target)},success:function(e){awcs_insert_body_classes(" page-template-default page woocommerce woocommerce-page ");awcs_target.html(e)},complete:function(){unblock(awcs_target);1<a(document).find(".woocommerce-breadcrumb").length&&a(document).find(".woocommerce-breadcrumb").last().hide();a.scroll_to_notices(a(".entry-title, .page-title"))}})})})(jQuery);