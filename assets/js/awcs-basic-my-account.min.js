/**
* File awcs-basic-my-account.min.js
* Basic my account contents
*/
(function(a){function e(b,c,d){a(this);block(c);a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:b,success:function(g){c.html(g).promise().done(function(){awcs_target.find(".entry-header .entry-title, header .page-title").text(d);if(c==awcs_target){var f=a(document).find("li.woocommerce-MyAccount-navigation-link--payment-methods a");f.length&&f.attr("href",f.attr("href")+"?referrer=pm")}})},complete:function(g){unblock(c);a.scroll_to_notices(a('[role="alert"], .entry-title, .page-title'))}})}
function l(){var b=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e({action:"awcs_my_account_orders"},b,"Orders")}function h(){var b=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e({action:"awcs_my_account_edit_address"},b,"Addresses")}function m(b){b={action:"awcs_my_account_edit_address_screen",endpoint:b};var c=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e(b,c,"Addresses")}function n(){var b=a(document).find("div.woocommerce .woocommerce-MyAccount-content");
e({action:"awcs_my_account_account_details"},b,"Account details")}a(document).on("click",".woocommerce form.woocommerce-form-login .woocommerce-form-login__submit",function(b){b.preventDefault();awcs_adjust_target_element(a(this));b=a("#woocommerce-login-nonce").val();var c=a(this).closest("form").find("#username").val(),d=a(this).closest("form").find("#password").val(),g=a(this).closest("form").find("#rememberme").val(),f=a(this).closest("form");block(f);a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,
data:{action:"awcs_process_login",woocommerce_login_nonce:b,username:c,password:d,rememberme:g,login:"Log in"},success:function(p){a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_view_account"},success:function(q){awcs_target.html(q).promise().done(function(){awcs_target.find(".entry-header .entry-title, header .page-title").text("My account");var k=a(document).find("li.woocommerce-MyAccount-navigation-link--payment-methods a");k.length&&k.attr("href",k.attr("href")+"?referrer=pm")})},
complete:function(q){unblock(f)}})}})});a(document).on("click",".woocommerce .woocommerce-form-login .woocommerce-LostPassword a",function(b){b.preventDefault();awcs_adjust_target_element(a(this));e({action:"awcs_lost_password_form"},awcs_target,"My account")});a(document).on("submit","form.woocommerce-ResetPassword",function(b){b.preventDefault();awcs_adjust_target_element(a(this));var c=a(this);c.append('<input type="hidden" name="action" value="awcs_process_lost_password_form" />');b=c.serializeArray();
block(c);a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:b,success:function(d){e({action:"awcs_confirmation_lost_password_email_sent"},awcs_target,"Lost password")},complete:function(d){unblock(c)}})});a(document).on("click",".woocommerce form.woocommerce-form-register .woocommerce-form-register__submit",function(b){b.preventDefault();awcs_adjust_target_element(a(this));b=a(this).closest("form");b.append('<input type="hidden" name="action" value="awcs_process_registration" />');b=b.serializeArray();
e(b,awcs_target,"My account")});a(document).on("click","li.woocommerce-MyAccount-navigation-link--dashboard a",function(b){b.preventDefault();b=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e({action:"awcs_my_account_dashboard"},b,"My account")});a(document).on("click",".woocommerce .woocommerce-MyAccount-content a",function(b){b.preventDefault();b=a(this).attr("href");if(0<=awcs_wc_global_params.account_orders_url.indexOf(b))l();else if(0<=awcs_wc_global_params.account_address_url.indexOf(b))h();
else if(0<=awcs_wc_global_params.account_edit_url.indexOf(b))n();else if(0<=awcs_wc_global_params.account_billing_address.indexOf(b))m("billing");else if(0<=awcs_wc_global_params.account_shipping_address.indexOf(b))m("shipping");else if(0<=b.indexOf("/my-account/customer-logout")){var c=a(this);block(c);a.ajax({type:"GET",url:c.attr("href"),dataType:"html",success:function(d){e({action:"awcs_wc_view_account"},awcs_target,"My account")},complete:function(){unblock(c);a.scroll_to_notices(a('[role="alert"], .entry-title, .page-title'))}})}});
a(document).on("click","li.woocommerce-MyAccount-navigation-link--orders a",function(b){b.preventDefault();l()});a(document).on("click",".woocommerce .woocommerce-MyAccount-content .woocommerce-Pagination a.woocommerce-button--next, .woocommerce .woocommerce-MyAccount-content .woocommerce-Pagination a.woocommerce-button--previous",function(b){b.preventDefault();b={action:"awcs_my_account_orders",current_page:a(this).attr("href").split("orders/")[1].replace("/","")};var c=a(document).find("div.woocommerce .woocommerce-MyAccount-content");
e(b,c,"Orders")});a(document).on("click",".woocommerce .woocommerce-MyAccount-content table.woocommerce-MyAccount-orders a.pay",function(b){b.preventDefault();awcs_adjust_target_element(a(this));var c=a(this);a.ajax({type:"GET",url:c.attr("href"),dataType:"html",success:function(d){d=c.attr("href").split("/?pay_for_order");d=d[0];var g=c.attr("href").split("key=wc_order_"),f=d.split("order-pay/")[1];a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:{action:"awcs_wc_order_pay",order_id:f},
success:function(p){awcs_target.html(p).promise().done(function(){a(document).find("form#order_review").css("width","100%");a(this).closest("article").find(".entry-header .entry-title").text("Pay for order");a(document).find("form#order_review").append('<input type="hidden" name="order_id" value="'+f+'" />');a(document).find("form#order_review").append('<input type="hidden" name="key" value="'+g[1]+'" />');a(document).find("form#order_review").append('<input type="hidden" name="action" value="awcs_wc_process_payment" />');
a(document).find('form#order_review input[name="_wp_http_referer"]').val(c.attr("href"))})}})}})});a(document).on("click","form#order_review #place_order",function(b){b.preventDefault();awcs_adjust_target_element(a(this));b=a(this).closest("form").serializeArray();a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:b,success:function(c){awcs_target.html(c).promise().done(function(){awcs_target.find(".entry-header .entry-title, header .page-title").text("Order Confirmation")})}})});a(document).on("click",
".woocommerce .woocommerce-MyAccount-content table.woocommerce-MyAccount-orders a.view",function(b){b.preventDefault();b=a(this).attr("href").split("view-order/");b=b[1];b=b.replace("/","");var c={action:"awcs_my_account_view_order",order_id:b},d=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e(c,d,"Order #"+b)});a(document).on("click",".woocommerce .woocommerce-MyAccount-content table.woocommerce-MyAccount-orders a.cancel",function(b){b.preventDefault();b=a(this);a.ajax({type:"GET",
url:b.attr("href"),dataType:"html",success:function(c){c=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e({action:"awcs_my_account_dashboard"},c,"My account")},complete:function(){a.scroll_to_notices(a('[role="alert"], .entry-title, .page-title'))}})});a(document).on("click","tr.woocommerce-orders-table__row td.woocommerce-orders-table__cell-order-number a",function(b){b.preventDefault();b=a(this).text().split("#");var c={action:"awcs_my_account_view_order",order_id:b[1]},d=a(document).find("div.woocommerce .woocommerce-MyAccount-content");
e(c,d,"Order #"+b[1])});a(document).on("click",".woocommerce .woocommerce-MyAccount-content .woocommerce-order-details .order-again a",function(b){b.preventDefault();var c=a(".woocommerce .woocommerce-MyAccount-content"),d=a(this);block(c);block(d);a.ajax({type:"GET",url:d.attr("href"),dataType:"html",success:function(g){g={action:"awcs_order_again_view_cart",isSinglePage:d.parents("#awcs-single-page-my-account").length?"single-page":""};a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:g,
success:function(f){a(".woocommerce-error, .woocommerce-message, .woocommerce-info").remove();awcs_target.html(f);jQuery(document.body).trigger("wc_fragment_refresh")},complete:function(){a.scroll_to_notices(a('[role="alert"], .entry-title, .page-title'))}});return!1},complete:function(){unblock(c);unblock(d)}})});a(document).on("click","li.woocommerce-MyAccount-navigation-link--downloads a",function(b){b.preventDefault();b=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e({action:"awcs_my_account_downloads"},
b,"Downloads")});a(document).on("click","li.woocommerce-MyAccount-navigation-link--edit-address a",function(b){b.preventDefault();h()});a(document).on("click","li.woocommerce-MyAccount-navigation-link-orders a",function(b){b.preventDefault();a(document).find("div.woocommerce .woocommerce-MyAccount-content").html("<h1>billing/shipping address</h1>")});a(document).on("click",'div.woocommerce .woocommerce-MyAccount-content .woocommerce-address-fields button[name="save_address"]',function(b){b.preventDefault();
b=a(this).closest("form").serializeArray();a(document).find("div.woocommerce .woocommerce-MyAccount-content");block(a(this));a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:b,complete:function(){h();a.scroll_to_notices(a('[role="alert"], .entry-title, .page-title'))}})});a(document).on("click","li.woocommerce-MyAccount-navigation-link--payment-methods a",function(b){b.preventDefault();var c=a(this);block(c);var d=a(document).find("div.woocommerce .woocommerce-MyAccount-content").first();
block(d);d.html('<div id="awcs_pm_wrapper" style="display: block;"><iframe id="awcs_pm_iframe" src="'+(awcs_wc_global_params.account_url+'payment-methods/" frameborder="0" allowtransparency="true" scrolling="no" allowpaymentrequest="true" data-origwidth="" data-origheight="" style="width: 100%; height: 3400px;" ></iframe></div>'));a("#awcs_pm_iframe").on("load",function(){unblock(d);unblock(c);awcs_target.find(".entry-header .entry-title, header .page-title").text("Payment methods");unblock(a(".woocommerce .woocommerce-MyAccount-content a"));
a("#awcs_pm_iframe").contents().find("a").click(function(){block(d)})})});a(document).on("click","li.woocommerce-MyAccount-navigation-link--edit-account a",function(b){b.preventDefault();n()});a(document).on("click",'div.woocommerce .woocommerce-MyAccount-content form.woocommerce-EditAccountForm button[name="save_account_details"]',function(b){b.preventDefault();b=a(this).closest("form").serializeArray();var c=a(document).find("div.woocommerce .woocommerce-MyAccount-content");e(b,c,"My account")});
a(document).on("click",".woocommerce .woocommerce-MyAccount-navigation li.woocommerce-MyAccount-navigation-link--customer-logout a",function(b){b.preventDefault();awcs_adjust_target_element(a(this));var c=a(this);block(c);a.ajax({type:"GET",url:c.attr("href"),dataType:"html",success:function(d){e({action:"awcs_wc_view_account"},awcs_target,"My account")},complete:function(){unblock(c);a.scroll_to_notices(a('[role="alert"], .entry-title, .page-title'))}})});a(document).ready(function(){if(0<=window.location.href.indexOf("my-account/payment-methods/?referrer=pm")){var b=
a(document).find("div.woocommerce .woocommerce-MyAccount-content").first();b.html('<div id="awcs_pm_wrapper" style="display: block;"><iframe id="awcs_pm_iframe" src="'+(awcs_wc_global_params.account_url+'payment-methods/" frameborder="0" allowtransparency="true" scrolling="no" allowpaymentrequest="true" data-origwidth="" data-origheight="" style="width: 100%; height: 3400px;" ></iframe></div>'));awcs_adjust_target_element(b);a("#awcs_pm_iframe").on("load",function(){unblock(b);awcs_target.find(".entry-header .entry-title, header .page-title").text("Payment methods");
unblock(a(".woocommerce .woocommerce-MyAccount-content a"));a("#awcs_pm_iframe").contents().find("a").click(function(){block(b)})})}})})(jQuery);