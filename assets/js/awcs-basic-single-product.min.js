/**
* File awcs-basic-single-product.min.js
* Loading single product contents
* Submitting product review
*/
(function(a){function m(){if(!e){var e={i18n_required_rating_text:"Please select a rating",review_rating_required:"yes",flexslider:{rtl:!1,animation:"slide",smoothHeight:!0,directionNav:!1,controlNav:"thumbnails",slideshow:!1,animationSpeed:500,animationLoop:!1,allowOneSlide:!1},zoom_enabled:"1",zoom_options:[],photoswipe_enabled:"1",photoswipe_options:{shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0},flexslider_enabled:"1"};a(document).on("init",".wc-tabs-wrapper, .woocommerce-tabs",
function(){a(this).find(".wc-tab, .woocommerce-tabs .panel:not(.panel .panel)").hide();var b=window.location.hash,d=window.location.href,f=a(this).find(".wc-tabs, ul.tabs").first();0<=b.toLowerCase().indexOf("comment-")||"#reviews"===b||"#tab-reviews"===b?f.find("li.reviews_tab a").click():0<d.indexOf("comment-page-")||0<d.indexOf("cpage=")?f.find("li.reviews_tab a").click():"#tab-additional_information"===b?f.find("li.additional_information_tab a").click():f.find("li:first a").click()}).on("click",
".wc-tabs li a, ul.tabs li a",function(b){b.preventDefault();b=a(this);var d=b.closest(".wc-tabs-wrapper, .woocommerce-tabs");d.find(".wc-tabs, ul.tabs").find("li").removeClass("active");d.find(".wc-tab, .panel:not(.panel .panel)").hide();b.closest("li").addClass("active");d.find(b.attr("href")).show()}).on("click","a.woocommerce-review-link",function(){a(".reviews_tab a").click();return!0}).on("init","#rating",function(){a(document).find("p.stars").length||a("#rating").hide().before('<p class="stars">\t\t\t\t\t\t\t\t<span>\t\t\t\t\t\t\t\t\t<a class="star-1" href="#">1</a>\t\t\t\t\t\t\t\t\t<a class="star-2" href="#">2</a>\t\t\t\t\t\t\t\t\t<a class="star-3" href="#">3</a>\t\t\t\t\t\t\t\t\t<a class="star-4" href="#">4</a>\t\t\t\t\t\t\t\t\t<a class="star-5" href="#">5</a>\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t</p>')}).on("click",
"#respond p.stars a",function(){var b=a(this),d=a(this).closest("#respond").find("#rating"),f=a(this).closest(".stars");d.val(b.text());b.siblings("a").removeClass("active");b.addClass("active");f.addClass("selected");return!1}).on("click","#respond #submit",function(){var b=a(this).closest("#respond").find("#rating"),d=b.val();if(0<b.length&&!d&&"yes"===e.review_rating_required)return window.alert(e.i18n_required_rating_text),!1});a(document).find(".wc-tabs-wrapper, .woocommerce-tabs, #rating").trigger("init");
var c=function(b,d){this.$target=b;this.$images=a(".woocommerce-product-gallery__image",b);0===this.$images.length?this.$target.css("opacity",1):(b.data("product_gallery",this),this.flexslider_enabled=a.isFunction(a.fn.flexslider)&&e.flexslider_enabled,this.zoom_enabled=a.isFunction(a.fn.zoom)&&e.zoom_enabled,this.photoswipe_enabled="undefined"!==typeof PhotoSwipe&&e.photoswipe_enabled,d&&(this.flexslider_enabled=!1===d.flexslider_enabled?!1:this.flexslider_enabled,this.zoom_enabled=!1===d.zoom_enabled?
!1:this.zoom_enabled,this.photoswipe_enabled=!1===d.photoswipe_enabled?!1:this.photoswipe_enabled),1===this.$images.length&&(this.flexslider_enabled=!1),this.initFlexslider=this.initFlexslider.bind(this),this.initZoom=this.initZoom.bind(this),this.initZoomForTarget=this.initZoomForTarget.bind(this),this.initPhotoswipe=this.initPhotoswipe.bind(this),this.onResetSlidePosition=this.onResetSlidePosition.bind(this),this.getGalleryItems=this.getGalleryItems.bind(this),this.openPhotoswipe=this.openPhotoswipe.bind(this),
this.flexslider_enabled?(this.initFlexslider(d.flexslider),b.on("woocommerce_gallery_reset_slide_position",this.onResetSlidePosition)):this.$target.css("opacity",1),this.zoom_enabled&&(this.initZoom(),b.on("woocommerce_gallery_init_zoom",this.initZoom)),this.photoswipe_enabled&&this.initPhotoswipe())};c.prototype.initFlexslider=function(b){var d=this.$target,f=this;b=a.extend({selector:".woocommerce-product-gallery__wrapper > .woocommerce-product-gallery__image",start:function(){d.css("opacity",1)},
after:function(g){f.initZoomForTarget(f.$images.eq(g.currentSlide))}},b);d.flexslider(b);a(".woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image:eq(0) .wp-post-image").one("load",function(){var g=a(this);g&&setTimeout(function(){var h=g.closest(".woocommerce-product-gallery__image").height(),k=g.closest(".flex-viewport");h&&k&&k.height(h)},100)}).each(function(){this.complete&&a(this).trigger("load")})};c.prototype.initZoom=function(){this.initZoomForTarget(this.$images.first())};
c.prototype.initZoomForTarget=function(b){if(!this.zoom_enabled)return!1;var d=this.$target.width(),f=!1;a(b).each(function(h,k){if(a(k).find("img").data("large_image_width")>d)return f=!0,!1});if(f){var g=a.extend({touch:!1},e.zoom_options);"ontouchstart"in document.documentElement&&(g.on="click");b.trigger("zoom.destroy");b.zoom(g);setTimeout(function(){b.find(":hover").length&&b.trigger("mouseover")},100)}};c.prototype.initPhotoswipe=function(){if(1>this.$target.find("a.woocommerce-product-gallery__trigger").length&&
this.zoom_enabled&&0<this.$images.length){if(this.$target.prepend('<a href="#" class="woocommerce-product-gallery__trigger">\ud83d\udd0d</a>'),this.$target.on("click",".woocommerce-product-gallery__trigger",this.openPhotoswipe),this.$target.on("click",".woocommerce-product-gallery__image a",function(b){b.preventDefault()}),!this.flexslider_enabled)this.$target.on("click",".woocommerce-product-gallery__image a",this.openPhotoswipe)}else this.$target.on("click",".woocommerce-product-gallery__image a",
this.openPhotoswipe)};c.prototype.onResetSlidePosition=function(){this.$target.flexslider(0)};c.prototype.getGalleryItems=function(){var b=this.$images,d=[];0<b.length&&b.each(function(f,g){var h=a(g).find("img");if(h.length){var k=h.attr("data-large_image"),n=h.attr("data-large_image_width"),p=h.attr("data-large_image_height");h={alt:h.attr("alt"),src:k,w:n,h:p,title:h.attr("data-caption")?h.attr("data-caption"):h.attr("title")};d.push(h)}});return d};c.prototype.openPhotoswipe=function(b){b.preventDefault();
var d=a(".pswp")[0],f=this.getGalleryItems();b=a(b.target);b=b.is(".woocommerce-product-gallery__trigger")||b.is(".woocommerce-product-gallery__trigger img")?this.$target.find(".flex-active-slide"):b.closest(".woocommerce-product-gallery__image");b=a.extend({index:a(b).index(),addCaptionHTMLFn:function(g,h){if(!g.title)return h.children[0].textContent="",!1;h.children[0].textContent=g.title;return!0}},e.photoswipe_options);(new PhotoSwipe(d,PhotoSwipeUI_Default,f,b)).init()};a.fn.wc_product_gallery=
function(b){new c(this,b||e);return this};a(".woocommerce-product-gallery:eq(0)").trigger("wc-product-gallery-before-init",[a(".woocommerce-product-gallery:eq(0)"),e]);a(".woocommerce-product-gallery:eq(0)").wc_product_gallery(e);a(".woocommerce-product-gallery:eq(0)").trigger("wc-product-gallery-after-init",[a(".woocommerce-product-gallery:eq(0)"),e])}}var l="ul.products li a.woocommerce-LoopProduct-link, ul.products li.product .shop-item-title-link, ul.products li.product .collection_title, ul.products li.product .products-title, ul.products li.product .woocommerce-loop-product__title, ul.products li .product_text a, ul.products li .product-inner .title a, ul.products li.outofstock a.button, ul.products li.product-type-variable a.button, ul.products li.product-type-grouped a.button, ul.products li a.woocommerce-loop-product__link, ul.products li a img, .awcs-ticker-single-product, form.woocommerce-cart-form .product-name a, form.woocommerce-cart-form img, .woocommerce .woocommerce-MyAccount-content .woocommerce-order-details .product-name a, .woocommerce .woocommerce-MyAccount-content .woocommerce-order-downloads .download-product a, .woocommerce-order .woocommerce-order-downloads .download-product a, .woocommerce-order .woocommerce-order-details .order_item .product-name a, .woocommerce-grouped-product-list-item a";
awcs_wc_global_params.single_product_selector&&(l=l+", "+awcs_wc_global_params.single_product_selector);a(document).on("click awcs_single_product",l,function(e){e.preventDefault();var c=a(this);c.is("img")?block(c.parent()):block(c);e=c.closest("li").hasClass("product-type-simple")?c.closest("li").find("a.product_type_simple").data("product_id")?c.closest("li").find("a.product_type_simple").data("product_id"):"":c.closest("li").hasClass("product-type-variable")?c.closest("li").find("a.product_type_variable").data("product_id")?
c.closest("li").find("a.product_type_variable").data("product_id"):"":c.closest("li").hasClass("product-type-grouped")?c.closest("li").find("a.product_type_grouped").data("product_id")?c.closest("li").find("a.product_type_grouped").data("product_id"):"":c.closest("li").hasClass("product-type-external")?c.closest("li").find("a.product_type_external").data("product_id")?c.closest("li").find("a.product_type_external").data("product_id"):"":c.attr("product-id")?c.attr("product-id"):c.data("product_id");
if(!e)if(c.closest(".cart_item").find(".product-remove a").data("product_id"))e=c.closest(".cart_item").find(".product-remove a").data("product_id");else if(c.closest("li.product").find("a.add_to_cart_button").length&&c.closest("li.product").find("a.add_to_cart_button").data("product_id"))e=c.closest("li.product").find("a.add_to_cart_button").data("product_id");else if(c.closest("li.product").find("a.product_type_grouped").length&&c.closest("li.product").find("a.product_type_grouped").data("product_id"))e=
c.closest("li.product").find("a.product_type_grouped").data("product_id");else if(c.closest("td.product-name").find(".awcs_order_item_product_id").length)e=c.closest("td.product-name").find(".awcs_order_item_product_id").val();else if(c.closest("li.product").find(".awcs_data_product_id").length)e=c.closest("li.product").find(".awcs_data_product_id").val();else if(c.closest(".woocommerce-grouped-product-list-item").length){var b=c.closest(".woocommerce-grouped-product-list-item").attr("id");b.length&&
(e=b.split("product-")[1])}if(e)return e=c.attr("href")&&0<=c.attr("href").indexOf("attribute_")?{action:"awcs_wc_single_product",product_id:e,product_url:c.attr("href")}:{action:"awcs_wc_single_product",product_id:e},a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:e,beforeSend:function(){awcs_set_target_element(awcs_get_target_element())},success:function(d){d?(awcs_insert_body_classes(" product-template-default single single-product woocommerce woocommerce-page singular "),awcs_target.html(d).promise().done(function(){document.title=
a(".awcs_wc_single_product_wrapper").find(".product_title").first().text()+" - "+awcs_wc_global_params.page_title;awcs_wc_basic_single_product_params.override_single_product&&awcs_load_single_product();m();(c.closest("li").hasClass("product-type-variable")||a(".awcs_wc_single_product_wrapper").find("form.variations_form").length)&&awcs_hide_variation_data(a(".awcs_wc_single_product_wrapper").find("form.variations_form"));if(c.closest(".product-name").find(".variation")||c.attr("href")&&0<=c.attr("href").indexOf("attribute_")){var f=
c.attr("href")&&0<=c.attr("href").indexOf("/?")?c.attr("href").split("/?")[1]:"";if(f=f&&0<=f.indexOf("&")?f.split("&"):f){for(var g in f){var h=f[g].split("=")[1];a(".awcs_wc_single_product_wrapper").find("form.variations_form select:eq("+g+")").val(h)}a(".awcs_wc_single_product_wrapper").find("form.variations_form select").change();"hidden"===a(".awcs_wc_single_product_wrapper").find("a.reset_variations").css("visibility")&&a(".awcs_wc_single_product_wrapper").find("a.reset_variations").css("visibility",
"visible").hide().fadeIn()}}})):alert("No more product available.")},complete:function(){c.is("img")?unblock(c.parent()):unblock(c);1<a(document).find(".woocommerce-breadcrumb").length&&a(document).find(".woocommerce-breadcrumb").last().hide();a.scroll_to_notices(a(".entry-title, .page-title, .awcs_single_product_frame"))}}),!1;alert("Product ID not found.")});a(document).on("click","#respond #submit",function(e){e.preventDefault();var c=a(this),b=c.closest("form");b.validate();if(!b.valid())return!1;
block(a(document).find("#respond #submit"));block(b);a.ajax({type:b.attr("method"),url:b.attr("action"),data:b.serialize(),success:function(d){d={action:"awcs_wc_single_product",product_id:b.find("#comment_post_ID").val()};a.ajax({type:"post",url:awcs_wc_global_params.ajax_url,data:d,beforeSend:function(){awcs_set_target_element(awcs_get_target_element())},success:function(f){if(f){var g=a("<div></div>");g.html(f);f=a(".woocommerce-tabs li#tab-title-reviews a",g).text();var h=a("div.woocommerce-product-rating",
g).first();g=a("div#comments",g);c.closest(".woocommerce-tabs").length?(c.closest(".woocommerce-tabs").find("li#tab-title-reviews a").text(f).hide().fadeIn("medium"),c.closest(".awcs_wc_single_product_wrapper").find("div.woocommerce-product-rating").first().replaceWith(h).hide().fadeIn("medium"),c.closest(".woocommerce-tabs").find("#comments").replaceWith(g).hide().fadeIn("medium")):(c.closest(".awcs_wc_single_product_wrapper").find(".woocommerce-tabs li#tab-title-reviews a").text(f).hide().fadeIn("medium"),
c.closest(".awcs_wc_single_product_wrapper").find("div.woocommerce-product-rating").first().replaceWith(h).hide().fadeIn("medium"),c.closest(".awcs_wc_single_product_wrapper").find("#comments").replaceWith(g).hide().fadeIn("medium"))}}})},complete:function(){unblock(b);unblock(a(document).find("#respond #submit"));1<a(document).find(".woocommerce-breadcrumb").length&&a(document).find(".woocommerce-breadcrumb").last().hide();a.scroll_to_notices(a(".woocommerce-tabs ul.tabs"))}})})})(jQuery);